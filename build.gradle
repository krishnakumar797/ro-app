/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
	id 'java-gradle-plugin'
	id 'groovy'
	id 'maven-publish'
	id 'com.gradle.plugin-publish' version '0.12.0'
}

group = 'com.github.rico'
version = '2.14'

pluginBundle {
	website = 'https://github.com/krishnakumar797/ro-app/wiki'
	vcsUrl = 'https://github.com/krishnakumar797/ro-app'
	tags = ['config', 'auto']
}

repositories {
	mavenCentral()
}

test {
	ignoreFailures = true
}
//Plugin declarations
gradlePlugin {
	plugins {
		roAppPlugin {
			id = 'com.github.rico.ro-app'
			displayName = 'Rico app plugin'
			description = 'Rico plugin manages auto configuration of dependencies for spring boot application'
			implementationClass = 'com.rico.platform.RoAppPlugin'
		}
		roCommonPlugin {
			id = 'com.github.rico.common'
			displayName = 'Rico common plugin'
			description = 'Rico common plugin manages common dependencies for spring boot application'
			implementationClass = 'com.rico.platform.RoCommonPlugin'
		}
		dockerRunPlugin {
			id = 'com.github.rico.dockerRun'
			displayName = 'Rico docker run plugin'
			description = 'Rico docker run plugin for running a spring boot application as docker container'
			implementationClass = 'com.rico.platform.DockerRunPlugin'
		}
		swarmPlugin {
			id = 'com.github.rico.swarm'
			displayName = 'Rico swarm plugin'
			description = 'Rico swarm plugin for running a spring boot application as docker swarm service'
			implementationClass = 'com.rico.platform.SwarmPlugin'
		}
	}
}

publishing {
	publications {
		roapp(MavenPublication) {
		 from components.java
		 groupId 'com.rico.platform'
		 artifactId 'ro-app'
		 version '2.14'
	  }
	}
}
//Dependencies for the plugin
dependencies {
	compileOnly gradleApi()
	implementation 'com.google.guava:guava:29.0-jre'
	implementation 'com.github.docker-java:docker-java-core:3.2.5'
	implementation 'com.github.docker-java:docker-java-transport-httpclient5:3.2.5'
	
	testImplementation ("junit:junit:4.13.1")
	testImplementation gradleTestKit()
}


configurations.all {
	resolutionStrategy {
		eachDependency { DependencyResolveDetails details ->
			if (details.requested.group == 'org.codehaus.groovy') {
				details.useVersion('3.0.3')
			}
		}
	}
}